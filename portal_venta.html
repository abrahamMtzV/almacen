<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar venta</title>
    <link rel="stylesheet" href="estilos.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
    <style>
      body {
        overflow: hidden;
        height: 100vh; 
    }
      #ImagenMadera2 {
          width: 100%;
          height: 30px;
          background-image: url('img/fondo.jpg');
          background-size: cover;
          background-position: start;
          background-repeat: no-repeat;
          display: flex;
          align-items: center;
          justify-content: center;
          opacity: 90%;
      }
      #ImagenMadera3 {
        width: 100%;
        height: 120px;
        background-image: url('img/fondo.jpg');
        background-size: cover;
        background-position: start;
        background-repeat: no-repeat;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 90%;
    }
      /* Cambiar color del switch cuando está activado */
      .form-check-input:checked {
        background-color: #8B4513;
        border-color: #8B4513;
      }

      /* Opcional: para mejorar la transición visual */
      .form-check-input {
        transition: background-color 0.3s, border-color 0.3s;
      }
      /* Borde café claro en las cards */
      .card {
        border: 1px solid #8B4513;
        border-radius: 0.75rem; /* redondeo suave */
      }
  </style>
  </head>
<body>

    <div id="ImagenMadera2"></div>
    <div class="fw-bold fs-3 text-dark text-center mb-5 mt-3">Selecciona tu pedido</div>

    <form action="enviar_datos.php" method="POST">
        <div id="productos-lista" class="container d-flex justify-content-center">
          <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4 justify-content-center" style="max-width: 1200px;">
      
            <!-- Producto 1 -->
            <div class="col">
              <div class="card h-100 shadow-mm">
                <div class="card-body">
                  <h5 class="card-title">Madera de Pino de 1ra y 2da</h5>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="productos[1][activo]" data-precio="120" onchange="calcularTotal()">
                    <label class="form-check-label text-success" for="producto1">$120.00</label>
                    <input type="number" class="form-control mt-2" name="productos[1][cantidad]" min="1" value="1" onchange="calcularTotal()">
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Producto 2 -->
            <div class="col">
              <div class="card h-100 shadow-mm">
                <div class="card-body">
                  <h5 class="card-title">Encino</h5>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="productos[2][activo]" data-precio="250" onchange="calcularTotal()">
                    <label class="form-check-label text-success" for="producto2">$250.00</label>
                    <input type="number" class="form-control mt-2" name="productos[2][cantidad]" min="1" value="1" onchange="calcularTotal()">
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Producto 3 -->
            <div class="col">
              <div class="card h-100 shadow-mm">
                <div class="card-body">
                  <h5 class="card-title">Caoba</h5>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="productos[3][activo]" data-precio="280" onchange="calcularTotal()">
                    <label class="form-check-label text-success" for="producto3">$280.00</label>
                    <input type="number" class="form-control mt-2" name="productos[3][cantidad]" min="1" value="1" onchange="calcularTotal()">
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Producto 4 -->
            <div class="col">
              <div class="card h-100 shadow-mm">
                <div class="card-body">
                  <h5 class="card-title">Triplay 6mm</h5>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="productos[4][activo]" data-precio="150" onchange="calcularTotal()">
                    <label class="form-check-label text-success" for="producto4">$150.00</label>
                    <input type="number" class="form-control mt-2" name="productos[4][cantidad]" min="1" value="1" onchange="calcularTotal()">
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Producto 5 -->
            <div class="col">
              <div class="card h-100 shadow-mm">
                <div class="card-body">
                  <h5 class="card-title">Triplay 12mm</h5>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="productos[5][activo]" data-precio="240" onchange="calcularTotal()">
                    <label class="form-check-label text-success" for="producto5">$240.00</label>
                    <input type="number" class="form-control mt-2" name="productos[5][cantidad]" min="1" value="1" onchange="calcularTotal()">
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Producto 6 -->
            <div class="col">
              <div class="card h-100 shadow-mm">
                <div class="card-body">
                  <h5 class="card-title">Triplay 18mm</h5>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="productos[6][activo]" data-precio="320" onchange="calcularTotal()">
                    <label class="form-check-label text-success" for="producto6">$320.00</label>
                    <input type="number" class="form-control mt-2" name="productos[6][cantidad]" min="1" value="1" onchange="calcularTotal()">
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Producto 7 -->
            <div class="col">
              <div class="card h-100 shadow-mm">
                <div class="card-body">
                  <h5 class="card-title">MDF Crudo</h5>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="productos[7][activo]" data-precio="190" onchange="calcularTotal()">
                    <label class="form-check-label text-success" for="producto7">$190.00</label>
                    <input type="number" class="form-control mt-2" name="productos[7][cantidad]" min="1" value="1" onchange="calcularTotal()">
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Producto 8 -->
            <div class="col">
              <div class="card h-100 shadow-mm">
                <div class="card-body">
                  <h5 class="card-title">MDF Enchapado</h5>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="productos[8][activo]" data-precio="220" onchange="calcularTotal()">
                    <label class="form-check-label text-success" for="producto8">$220.00</label>
                    <input type="number" class="form-control mt-2" name="productos[8][cantidad]" min="1" value="1" onchange="calcularTotal()">
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Producto 9 -->
            <div class="col">
              <div class="card h-100 shadow-mm">
                <div class="card-body">
                  <h5 class="card-title">MDF Marino</h5>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="productos[9][activo]" data-precio="350" onchange="calcularTotal()">
                    <label class="form-check-label text-success" for="producto9">$350.00</label>
                    <input type="number" class="form-control mt-2" name="productos[9][cantidad]" min="1" value="1" onchange="calcularTotal()">
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Producto 10 -->
            <div class="col">
              <div class="card h-100 shadow-mm">
                <div class="card-body">
                  <h5 class="card-title">Vigas de pino</h5>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="productos[10][activo]" data-precio="180" onchange="calcularTotal()">
                    <label class="form-check-label text-success" for="producto10">$180.00</label>
                    <input type="number" class="form-control mt-2" name="productos[10][cantidad]" min="1" value="1" onchange="calcularTotal()">
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Producto 11 -->
            <div class="col">
              <div class="card h-100 shadow-mm">
                <div class="card-body">
                  <h5 class="card-title">Polines</h5>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="productos[11][activo]" data-precio="140" onchange="calcularTotal()">
                    <label class="form-check-label text-success" for="producto11">$140.00</label>
                    <input type="number" class="form-control mt-2" name="productos[11][cantidad]" min="1" value="1" onchange="calcularTotal()">
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Producto 12 -->
            <div class="col">
              <div class="card h-100 shadow-mm">
                <div class="card-body">
                  <h5 class="card-title">Tablas rústicas</h5>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="productos[12][activo]" data-precio="160" onchange="calcularTotal()">
                    <label class="form-check-label text-success" for="producto12">$160.00</label>
                    <input type="number" class="form-control mt-2" name="productos[12][cantidad]" min="1" value="1" onchange="calcularTotal()">
                  </div>
                </div>
              </div>
            </div>
      
          </div>
        </div>
      
        <!-- Mostrar total -->
        <p class="mt-4 fs-5 text-center fw-bold text-success">Total: <span id="total">0</span> MXN</p>
      
        <!-- Campos ocultos -->
        <input type="hidden" name="contenido" id="contenidoTicket">
        <input type="hidden" name="nombreArchivo" id="nombreArchivoTicket">
      
        <!-- Botón enviar -->
        <div class="text-center">
            <button class="btn btn-primary mt-3 bg-success border-0" type="submit" id="btnRegistrar" disabled>Registrar Venta</button>
            <a href='index.html' class='btn btn-primary mt-3 bg-dark border-0' id="btn_regresar">Regresar a inicio</a>
          </div> <br><br>
      </form>
      
      <div id="ImagenMadera3"></div>
      <script>
        const nombresProductos = {
            1: "Madera de Pino de 1ra y 2da",
            2: "Encino",
            3: "Caoba",
            4: "Triplay 6mm",
            5: "Triplay 12mm",
            6: "Triplay 18mm",
            7: "MDF Crudo",
            8: "MDF Enchapado",
            9: "MDF Marino",
            10: "Vigas de pino",
            11: "Polines",
            12: "Tablas rústicas"
        };
    
        // Función para verificar el estado de los checkboxes
        function verificarCheckboxes() {
            const checkboxes = document.querySelectorAll('.form-check-input');
            const btnRegistrar = document.getElementById('btnRegistrar');
            let alMenosUnoSeleccionado = false;
    
            checkboxes.forEach(cb => {
                if (cb.checked) {
                    alMenosUnoSeleccionado = true;
                }
            });
    
            btnRegistrar.disabled = !alMenosUnoSeleccionado;
        }
    
        // Función para calcular el total
        function calcularTotal() {
            const checkboxes = document.querySelectorAll('.form-check-input');
            let total = 0;
    
            checkboxes.forEach(cb => {
                if (cb.checked) {
                    // Obtener el ID del producto del nombre del input
                    const id = cb.name.match(/\[(\d+)\]/)[1];
                    // Obtener el input de cantidad correspondiente
                    const cantidadInput = document.querySelector(`input[name="productos[${id}][cantidad]"]`);
                    const cantidad = parseInt(cantidadInput.value) || 1;
                    const precio = parseFloat(cb.dataset.precio);
                    total += precio * cantidad;
                }
            });
    
            document.getElementById("total").innerText = total.toFixed(2);
            verificarCheckboxes(); // Verificar el estado de los checkboxes
            return total;
        }
    
        // Asignar eventos cuando el DOM esté cargado
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar estado inicial
            verificarCheckboxes();
            
            // Asignar eventos a todos los checkboxes
            const checkboxes = document.querySelectorAll('.form-check-input');
            checkboxes.forEach(cb => {
                cb.addEventListener('change', function() {
                    calcularTotal();
                    verificarCheckboxes();
                });
            });
            
            // Asignar eventos a todos los inputs de cantidad
            const cantidadInputs = document.querySelectorAll('input[type="number"]');
            cantidadInputs.forEach(input => {
                input.addEventListener('change', calcularTotal);
            });
        });
    </script>
    


</body>
</html>